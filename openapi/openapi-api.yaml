openapi: 3.1.0
info:
  title: Multi Service Demo API
  version: 1.0.0
servers:
  - url: http://localhost:8080
    description: Java Spring service
  - url: http://localhost:8000
    description: Python FastAPI service
jsonSchemaDialect: https://json-schema.org/draft/2020-12/schema
paths:
  /messages/java:
    get:
      summary: List messages stored by Java
      operationId: listJavaMessages
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/DemoMessage'
    post:
      summary: Publish via Java service
      operationId: publishJavaMessage
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DemoMessage'
      responses:
        '202':
          description: Accepted
  /messages/java/from-python:
    get:
      summary: Messages consumed from Python topic
      operationId: listPythonMessagesOnJava
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/DemoMessage'
  /messages/python:
    get:
      summary: List messages stored by Python
      operationId: listPythonMessages
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/DemoMessage'
    post:
      summary: Publish via Python service
      operationId: publishPythonMessage
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DemoMessage'
      responses:
        '202':
          description: Accepted
  /messages/python/from-java:
    get:
      summary: Messages consumed from Java topic
      operationId: listJavaMessagesOnPython
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/DemoMessage'
components:
  schemas:
    DemoMessage:
      $ref: ./schemas/demo-message.schema.json
    Item:
      $ref: ./schemas/item.schema.json
